{% extends 'store/base.html' %}

{% block title %} {{ title }} {% endblock %}
<script src="https://js.stripe.com/v3/"></script>


{% block content %}


<h1 class="text-2xl text-center py-1 font-bold">{{ title }}</h1>

<div class="w-full my-4 bg-gray-100 mx-auto p-4 float-right">

    {% for order in order_details %}
    <div class="grid grid-cols-4 border-t-2 border-gray-900 mb-4 text-2xl font-bold">
        <p>ORDER: {{order.id}}</p>
        <p>CHECKED OUT: {{order.get_paid_order}}</p>
        <p>ORDER PLACED: {{order.get_created_date}}</p>
        <p>OWNER: {{ order.created_by }}</p>
    </div>
    <table class="w-full table-fixed mt-4">					
        <thead class="font-bold">
        <!-- The header row-->
            <tr>

            <td>Name</td>
            <td>Quantity</td>
            <td>Price</td>
            <td>Item Total</td>
            <td>Discount</td>
            
            </tr>
        </thead>
        <tbody>
            {% for order_item in order.get_items %}
            <tr>
            
                <td>{{order_item.product}}</td>
                <td>{{order_item.quantity}}</td>
                <td>{{order_item.price}}</td>
                <td>{{order_item.get_cost}}</td>	
                <td>{{order_item.discount_sub_total}}</td>
                
            </tr>
            {% endfor %}
            <!-- End of For loop -->			
        </tbody>
    </table>
    
    <div>
        <p class="font-bold mt-4">Order amount before discounts:
			{{order.get_total_cost}}</p>
		<p class="font-bold">Discount: -{{order.get_total_discount}}</p>
				<p class="font-bold">Order Total:
                                {{order.get_total_cost_after_discount}}</p>
        <a href="{% url 'payments:checkout' order.id %}" class="text-red-900 mt-2">Proceed to checkout</a>
    </div>  
        

<form method="post" action="." enctype="multipart/form-data">
    {% csrf_token %}
    

{% endfor %}



</form>
  
    
<!-- </form> -->

{% endblock %}
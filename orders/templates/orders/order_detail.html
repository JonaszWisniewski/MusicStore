{% extends 'store/base.html' %}

{% block title %} {{ title }} {% endblock %}
<script src="https://js.stripe.com/v3/"></script>


{% block content %}


<h1 class="text-2xl text-center py-1 font-bold">{{ title }}</h1>

<div class="w-full my-4 bg-gray-100 mx-auto p-4 float-right">

    {% for order in order_details %}
    <div class="grid grid-cols-4 border-t-2 border-gray-900 mb-4 text-2xl font-bold">
        <p>ORDER: {{order.id}}</p>
        <p>CHECKED OUT: {{order.get_paid_order}}</p>
        <p>ORDER PLACED: {{order.get_created_date}}</p>
        <p>OWNER: {{ order.created_by }}</p>
    </div>
    <table class="w-full table-fixed mt-4">					
        <thead class="font-bold">
        <!-- The header row-->
            <tr>

            <td>Name</td>
            <td>Quantity</td>
            <td>Price</td>
            <td>Item Total</td>
            <td>Discount</td>
            
            </tr>
        </thead>
        <tbody>
            {% for order_item in order.get_items %}
            <tr>
            
                <td><a href="{% url 'products:detail' order_item.product.id %}">{{order_item.product}}</a></td>
                <td>{{order_item.quantity}}</td>
                <td>{{order_item.price}}</td>
                <td>{{order_item.get_cost}}</td>	
                <td>{{order_item.discount_sub_total}}</td>
                
            </tr>
            {% endfor %}
            <!-- End of For loop -->			
        </tbody>
    </table>
    
    <div>
        <p class="font-bold mt-4">Order amount before discounts:
			{{order.get_total_cost}}</p>
		<p class="font-bold">Discount: -{{order.get_total_discount}}</p>
				<p class="font-bold">Order Total:
                                {{order.get_total_cost_after_discount}}</p>
        <a href="{% url 'payments:checkout' order.id %}" class="text-red-900 mt-2">Proceed to checkout</a>
    </div>  

    <div class="bg-gray-100 px-6 py-6">
        <form method="post" action="{% url 'orders:detail' order.id %}" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="checkbox" id="is_default" name="is_default" value="True">
            <label for="is_default">Default address?</label><br>
            
        
    </div>

        
    <div class="bg-gray-100 px-6 py-6">
        <h1 class="mb-6 text-3xl text-center">Billing details</h1>
        
            <div class="columns-2">
        
                <div class="mb-2">
                    <label class="inline-block mb-2 mt-2 font-medium">Full Name: </label>
                    {{ profileForm.full_name }}
                </div>
        
        
                <div class="mb-2">
                    <label class="inline-block mb-2 mt-2 font-medium">Age: </label><br>
                    {{ profileForm.age }}
                </div>
        
                <div class="mb-2">
                    <label class="inline-block mb-2 mt-2 font-medium">Address 1: </label>
                    {{ profileForm.address1 }}
                </div>
        
                <div class="mb-2">
                    <label class="inline-block mb-2 mt-2 font-medium">Address 2: </label>
                    {{ profileForm.address2 }}
                </div>
        
                <div class="mb-2">
                    <label class="inline-block mb-2 mt-2 font-medium">Country: </label>
                    {{ profileForm.country }}
                </div>
        
                <div class="mb-2">
                    <label class="inline-block mb-2 mt-2 font-medium">City </label>
                    {{ profileForm.city }}
                </div>
        
                <div class="mb-2">
                    <label class="inline-block mb-2 mt-2 font-medium">County</label>
                    {{ profileForm.county }}
                </div>
        
                <div class="mb-2">
                    <label class="inline-block mb-2 mt-2 font-medium">Phone</label>
                    {{ profileForm.phone }}
                </div>
                
    </div>
    </div>
    <div class="bg-gray-100 px-6 py-6">
        <h1 class="mb-6 text-3xl text-center">Order billing address</h1>
        
            <div class="columns-2">
        
                <div class="mb-2">
                    <label class="inline-block mb-2 mt-2 font-medium">Full Name: </label>
                    {{ orderForm.full_name }}
                </div>
        
        
                <div class="mb-2">
                    <label class="inline-block mb-2 mt-2 font-medium">Age: </label><br>
                    {{ orderForm.age }}
                </div>
        
                <div class="mb-2">
                    <label class="inline-block mb-2 mt-2 font-medium">Address 1: </label>
                    {{ orderForm.address1 }}
                </div>
        
                <div class="mb-2">
                    <label class="inline-block mb-2 mt-2 font-medium">Address 2: </label>
                    {{ orderForm.address2 }}
                </div>
        
                <div class="mb-2">
                    <label class="inline-block mb-2 mt-2 font-medium">Country: </label>
                    {{ orderForm.country }}
                </div>
        
                <div class="mb-2">
                    <label class="inline-block mb-2 mt-2 font-medium">City </label>
                    {{ orderForm.city }}
                </div>
        
                <div class="mb-2">
                    <label class="inline-block mb-2 mt-2 font-medium">County</label>
                    {{ orderForm.county }}
                </div>
        
                <div class="mb-2">
                    <label class="inline-block mb-2 mt-2 font-medium">Phone</label>
                    {{ orderForm.phone }}
                </div>
                
    </div>
    <button class="py-4 mt-5 px-6 text-lg bg-teal-500">Submit</button>
</form>
{% endfor %}




  
    


{% endblock %}
{% extends 'store/base.html' %}

{% block title %} {{ title }} {% endblock %}

{% block content %}

<p>
	<a href><button class="btn btn-primary bg-red-500 py-2 px-2">Paid Order</button></a>
	<a href><button class="btn btn-primary bg-green-500 py-2 px-2">Unpaid Order</button></a>
</p>

<div class="w-full my-4 bg-gray-100 mx-auto p-4 float-right">

	{% for order in page.object_list %}

	
		<div class="grid grid-cols-3 gap-5 border-t-2 border-gray-900 mb-4 text-2xl font-bold">
			<p>ORDER {{order.id}}</p>
			<p>ORDER PLACED: {{order.get_created_date}}</p>
			<p>CHECKED OUT: {{order.get_paid_order}}</p>
		</div>

		<table class="w-full table-fixed mt-4">					
			<thead class="font-bold">
			<!-- The header row-->
				<tr>
					<td>Name</td>
					<td>Quantity</td>
					<td>Price</td>
					<td>Item Total</td>
					<td>Discount</td>
				</tr>
			</thead>
			<tbody>
				{% for order_item in order.get_items %}
				<tr>
					<td>{{order_item.product}}</td>
					<td>{{order_item.quantity}}</td>
					<td>{{order_item.price}}</td>
					<td>{{order_item.get_cost}}</td>		
					<td>{{order_item.discount_sub_total}}</td>
				</tr>
				{% endfor %}
			</tbody>
			
		</table>
		<p class="font-bold mt-4">Order amount before discounts:
			{{order.get_total_cost}}</p>
		<p class="font-bold">Discount: -{{order.get_total_discount}}</p>
				<p class="font-bold">Order Total:
                                {{order.get_total_cost_after_discount}}</p>
								
								
				
			
        <p>
			<a href="{% url 'orders:cancel_order' order.id %}"><button class="btn btn-primary bg-red-500 mt-4 mb-6 py-2 px-2">Delete Order</button></a>
			<a href="{% url 'orders:detail' order.id %}"><button class="btn btn-primary bg-green-500 mt-4 mb-6 py-2 px-2">Order Detail</button></a>
        </p>
		
	{% endfor %}

	<div class="flex flex-row justify-center items-center mt-4">
		<nav>
		   
			<ul class="list-style-none flex">
			  {% if page.has_previous %}
			  <li>
				<a href="{% url 'orders:order_history' %}?page={{ page.previous_page_number }}" class="relative block rounded bg-transparent px-3 py-1.5 text-sm text-surface transition duration-300 hover:bg-neutral-100 focus:bg-neutral-100 focus:text-primary-700 focus:outline-none active:bg-neutral-100 active:text-primary-700 dark:text-white dark:hover:bg-neutral-700 dark:focus:bg-neutral-700 dark:focus:text-primary-500 dark:active:bg-neutral-700 dark:active:text-primary-500">Previous</a>
			  </li>
			  {% endif %}
		
			  {% for num_page in page.paginator.page_range %}
			  
			  {% if page.number == num_page %}
			  <li>
				<a href="{% url 'orders:order_history' %}?page={{ num_page }}" class="relative block rounded bg-blue-300 px-4 py-1.5 text-sm text-surface transition duration-300 hover:bg-blue-500 focus:bg-blue-500 focus:text-primary-700 focus:outline-none active:bg-blue-500 active:text-primary-700 dark:text-white dark:hover:bg-neutral-700 dark:focus:bg-neutral-700 dark:focus:text-primary-500 dark:active:bg-neutral-700 dark:active:text-primary-500">{{ num_page }}</a>
			  </li>
		
			  {% else %}
		
			  <li>
				<a href="{% url 'orders:order_history' %}?page={{ num_page }}" class="relative block rounded bg-transparent px-3 py-1.5 text-sm text-surface transition duration-300 hover:bg-neutral-100 focus:bg-neutral-100 focus:text-primary-700 focus:outline-none active:bg-neutral-100 active:text-primary-700 dark:text-white dark:hover:bg-neutral-700 dark:focus:bg-neutral-700 dark:focus:text-primary-500 dark:active:bg-neutral-700 dark:active:text-primary-500">{{ num_page }}</a>
			  </li>
		
			  {% endif %}
		
			  {% endfor %}
			  
			  {% if page.has_next %}
			  <li>
				<a href="{% url 'orders:order_history' %}?page={{ page.next_page_number }}" class="relative block rounded bg-transparent px-3 py-1.5 text-sm text-surface transition duration-300 hover:bg-neutral-100 focus:bg-neutral-100 focus:text-primary-700 focus:outline-none active:bg-neutral-100 active:text-primary-700 dark:text-white dark:hover:bg-neutral-700 dark:focus:bg-neutral-700 dark:focus:text-primary-500 dark:active:bg-neutral-700 dark:active:text-primary-500">Next</a>
			  </li>
			  {% endif %}
			</ul>
		</nav>
	</div>

</div>

{% endblock content %}



